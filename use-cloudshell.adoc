---
sidebar: sidebar 
permalink: use-cloudshell.html 
keywords: cloudshell, command line, aws cli, ontap cli, NetApp Workload Factory, Workload Factory 
summary: 您可以从NetApp Workload Factory 用户界面中的任何位置使用 CloudShell 发出 AWS 或ONTAP CLI 命令。 
---
= 在NetApp Workload Factory 中使用 CloudShell
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
打开 CloudShell 以从NetApp Workload Factory 控制台中的任何位置执行 AWS 或ONTAP CLI 命令。



== 关于此任务

CloudShell 允许您在 Workload Factory 控制台内类似 shell 的环境中执行 AWS CLI 命令或ONTAP CLI 命令。它在浏览器中模拟终端会话，通过 Workload Factory 的后端提供终端功能和代理消息。它允许您使用您在NetApp帐户中提供的 AWS 凭证和ONTAP凭证。

CloudShell功能包括：

* 多个CloudShell会话：一次部署多个CloudShell会话以并行发出多个命令序列、
* 多个视图：拆分CloudShell选项卡会话、以便您可以同时水平或垂直查看两个或多个选项卡
* 会话重命名：根据需要重命名会话
* 上次会话内容持久性：如果您错误地关闭了上次会话、请重新打开它
* 设置首选项：更改字体大小和输出类型
* AI生成的ONTAP命令行界面命令错误响应
* 自动完成支持：开始键入命令，然后使用*Tab*键查看可用选项




== CloudShell命令

在CloudShell图形用户界面中、您可以输入 `help`以查看可用的CloudShell命令。发出命令后 `help`、将显示以下参考信息。

.说明
NetApp CloudShell 是NetApp Workload Factory 内置的 GUI 界面，可让您在类似 shell 的环境中执行 AWS CLI 命令或ONTAP CLI 命令。它在浏览器中模拟终端会话，通过 Workload Factory 中的后端提供终端功能和代理消息。它使您能够使用您在NetApp帐户中提供的 AWS 凭证和ONTAP凭证。

.可用命令
* `clear`
* `help`
* `[--fsx <fsxId>] <ontap-command> [parameters]`
* `aws <aws-command> <aws-sub-command> [parameters]`


.环境
每个终端会话都在特定环境下运行：凭据、区域以及可选的FSx for ONTAP文件系统。

+ 所有 AWS 命令都在提供的上下文中执行。仅当提供的凭证在指定区域具有权限时，AWS 命令才会成功。

+ 您可以使用可选的ONTAP命令指定 `fsxId`。如果您提供 `fsxId`使用单独的ONTAP命令，则此 ID 将覆盖上下文中的 ID。如果终端会话没有 FSx for ONTAP文件系统 ID 上下文，则必须提供 `fsxId`每个ONTAP命令。

+ 要更新不同的上下文细节，请执行以下操作：* 要更改凭据：“使用凭据 <credentialId>”* 要更改区域：“使用区域 <regionCode>”* 要更改 FSx for ONTAP文件系统：“使用 fsx <fileSystemId>”

.显示项目
* 要显示可用凭据、请执行以下操作："显示凭据"
* 要显示可用区域："显示区域"
* 要显示命令历史记录："show histy"


.变量
以下是设置和使用变量的示例。如果变量值包含空格、则应将其设置在引号内。

+ * 设置变量：$<variable> = <value> * 使用变量：$<variable> * 设置变量的示例：$svm1 = svm123 * 使用变量的示例：--fsx FileSystem-1 volumes show --vserver $svm1 * 设置具有字符串值的变量的示例 $comment1 = "带有空格的注释"

.运算符
不支持管道、后台执行 `&`和重定向 `>`等Shell运算符 `|`。如果包含这些运算符、则命令执行将失败。



== 开始之前

CloudShell可在您的AWS凭据环境中运行。要使用CloudShell、您必须至少提供一个AWS凭据。


NOTE: 您可以使用CloudShell执行任何AWS或ONTAP命令行界面命令。但是，如果要在FSx for ONTAP文件系统的环境中工作，请确保发出以下命令： `using fsx <file-system-name>`。



== 部署CloudShell

您可以从NetApp Workload Factory 控制台中的任何位置部署 CloudShell。您还可以从NetApp控制台部署 CloudShell。

[role="tabbed-block"]
====
.从 Workload Factory 控制台部署
--
.步骤
. 登录 https://console.workloads.netapp.com["工作负载工厂控制台"^]。
. 从菜单中选择“*管理*”，然后选择“*CloudShell*”。
. 在CloudShell窗口中、为CloudShell会话选择凭据和区域、然后选择箭头以继续。
+
image:screenshot-deploy-cloudshell-session.png["显示新CloudShell会话的屏幕截图。"]

. 输入 `help`以查看可用<<CloudShell命令,CloudShell命令>>命令和说明、或者参阅以下命令行界面参考文档以了解可用命令：
+
** link:https://docs.aws.amazon.com/cli/latest/reference/["AWS CLI参考"^]：对于与FSx for ONTAP相关的命令，请选择*FSX*。
** link:https://docs.netapp.com/us-en/ontap-cli/["ONTAP命令行界面参考"^]


. 在CloudShell会话中发出命令。
+
如果在发出ONTAP命令行界面命令后发生错误、请选择灯泡图标以获取由AI生成的简短错误响应、并提供故障说明、故障原因和详细解决方案。有关详细信息，请选择*阅读更多*。



--
.从NetApp控制台部署
--
.步骤
. 登录link:https://console.netapp.com["NetApp控制台"^]。
. 从菜单中选择“*工作负载*”，然后选择“*管理*”。
. 从管理菜单中，选择 *CloudShell*。
. 在CloudShell窗口中、为CloudShell会话选择凭据和区域、然后选择箭头以继续。
+
image:screenshot-deploy-cloudshell-session.png["显示新CloudShell会话的屏幕截图。"]

. 输入 `help`以查看可用的CloudShell命令和说明、或者参阅以下命令行界面参考文档以了解可用命令：
+
** link:https://docs.aws.amazon.com/cli/latest/reference/["AWS CLI参考"^]：对于与FSx for ONTAP相关的命令，请选择*FSX*。
** link:https://docs.netapp.com/us-en/ontap-cli/["ONTAP命令行界面参考"^]


. 在CloudShell会话中发出命令。
+
如果在发出ONTAP命令行界面命令后发生错误、请选择灯泡图标以获取由AI生成的简短错误响应、并提供故障说明、故障原因和详细解决方案。有关详细信息，请选择*阅读更多*。



--
====
通过选择打开的 CloudShell 会话选项卡的操作菜单，可以完成此屏幕截图中显示的 CloudShell 任务。以下是每个任务的说明。

image:screenshot-cloudshell-tab-menu.png["屏幕截图显示了 CloudShell 选项卡操作菜单，其中包含重命名、复制、关闭其他选项卡和全部关闭等选项。"]



== 重命名CloudShell会话选项卡

您可以重命名CloudShell会话选项卡以帮助您识别会话。

.步骤
. 选择 CloudShell 会话选项卡的操作菜单。
. 选择 * 重命名 * 。
. 为会话选项卡输入新名称、然后单击选项卡名称外部以设置新名称。


.结果
新名称将显示在CloudShell会话选项卡中。



== 重复的CloudShell会话选项卡

您可以复制CloudShell会话选项卡、以创建具有相同名称、凭据和区域的新会话。原始选项卡中的代码不会在复制选项卡中复制。

.步骤
. 选择 CloudShell 会话选项卡的操作菜单。
. 选择*复制*。


.结果
此时将显示与原始选项卡同名的新选项卡。



== 关闭CloudShell会话选项卡

您可以一次关闭一个CloudShell选项卡、关闭其他未处理的选项卡或一次性关闭所有选项卡。

.步骤
. 选择 CloudShell 会话选项卡的操作菜单。
. 选择以下选项之一：
+
** 在CloudShell选项卡窗口中选择"X"、一次关闭一个选项卡。
** 选择*关闭其他选项卡*以关闭除您正在处理的选项卡之外所有其他已打开的选项卡。
** 选择*关闭所有选项卡*关闭所有选项卡。




.结果
此时将关闭选定的CloudShell会话选项卡。



== 拆分CloudShell会话选项卡

您可以拆分CloudShell会话选项卡以同时查看两个或更多选项卡。

.步骤
将CloudShell会话选项卡拖放到CloudShell窗口的顶部、底部、左侧或右侧以拆分视图。

image:screenshot-cloudshell-split-view.png["屏幕截图、显示两个CloudShell选项卡水平拆分。选项卡并排显示。"]



== 更新CloudShell会话的设置

您可以更新CloudShell会话的字体和输出类型设置。

.步骤
. 部署CloudShell会话。
. 在CloudShell选项卡中、选择设置图标。
+
此时将显示设置对话框。

. 根据需要更新字体大小和输出类型。
+

NOTE: 丰富的输出适用于JSON对象和表格格式。所有其他输出均显示为纯文本。

. 选择 * 应用 * 。


.结果
此时将更新CloudShell设置。
